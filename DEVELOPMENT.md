# 🚀 农场主小游戏 - 开发流程

**项目周期**：4-5周（1个月完成Demo）
**开发模式**：单人开发，小步快跑，快速迭代
**更新日期**：2026-01-01

---

## 📋 目录

1. [开发原则](#开发原则)
2. [阶段规划](#阶段规划)
3. [时间安排](#时间安排)
4. [里程碑检查点](#里程碑检查点)
5. [开发建议](#开发建议)
6. [进度追踪](#进度追踪)

---

## 开发原则

### 核心理念
- ✅ **快速迭代，小步快跑**
- ✅ **先实现，再优化**
- ✅ **立即测试，持续验证**
- ✅ **避免过度设计**

### 功能优先级
```
1. 核心功能（必须）→ 耕种、存档、商店
2. 重要功能（应该）→ 任务、NPC、背包
3. 增强功能（可选）→ 动物、音效、动画
```

### 遇到问题时的处理顺序
```
第1步：先实现基本功能（能用就行）
第2步：测试核心流程（确保可用）
第3步：优化代码结构（让代码好看）
第4步：打磨细节体验（做到完美）
```

---

## 阶段规划

### 📅 阶段0：准备工作（半天）

**目标**：搭建开发环境和账号

**任务清单**：
- [ ] 确认开发环境
  - [ ] 安装 Node.js（v18+）
  - [ ] 安装 VS Code
  - [ ] 安装 Git（可选）
  - [ ] 注册 GitHub 账号（可选）
- [ ] 注册 Supabase 账号
  - [ ] 创建新项目
  - [ ] 获取 API URL 和 Key
  - [ ] 记录到安全的地方

**产出**：
- ✅ 开发环境就绪
- ✅ Supabase 项目创建完成
- ✅ 获得数据库连接信息

**下一步**：阶段1 - 项目初始化

---

### 📅 阶段1：项目初始化（1天）

**目标**：搭建 React + Vite + TypeScript 项目

**任务清单**：
- [ ] 初始化项目
  ```bash
  npm create vite@latest form-game -- --template react-ts
  cd form-game
  npm install
  ```
- [ ] 安装核心依赖
  ```bash
  npm install phaser zustand @supabase/supabase-js ant-day react-router-dom
  npm install -D tailwindcss postcss autoprefixer
  npx tailwindcss init -p
  npm install -D eslint prettier
  ```
- [ ] 配置 TailwindCSS
  - [ ] 编辑 `tailwind.config.js`
  - [ ] 添加到 `index.css`
- [ ] 配置 ESLint + Prettier
- [ ] 创建目录结构
- [ ] 删除 Vite 默认文件

**目录结构**：
```
form-game/
├── src/
│   ├── components/      # UI组件
│   │   ├── auth/       # 认证相关
│   │   ├── game/       # 游戏相关
│   │   └── common/     # 通用组件
│   ├── game/           # Phaser游戏
│   │   ├── scenes/     # 场景
│   │   ├── entities/   # 实体
│   │   ├── systems/    # 系统
│   │   └── config/     # 配置
│   ├── hooks/          # 自定义Hooks
│   ├── lib/            # 工具库
│   ├── store/          # Zustand状态
│   ├── pages/          # 页面
│   ├── styles/         # 样式
│   ├── types.ts        # 类型定义
│   ├── App.tsx
│   └── main.tsx
├── public/             # 静态资源
├── .env.local          # 环境变量
├── package.json
├── vite.config.ts
├── tailwind.config.js
└── tsconfig.json
```

**产出**：
- ✅ 项目可以运行（npm run dev）
- ✅ 目录结构创建完成
- ✅ 基础配置完成

**验证标准**：
```bash
npm run dev
# 访问 http://localhost:5173
# 看到空白页面（或测试组件）
```

**下一步**：阶段2 - Supabase 集成

---

### 📅 阶段2：Supabase 集成（0.5天）

**目标**：实现用户认证系统

**任务清单**：
- [ ] 在 Supabase 创建数据库表
  - [ ] 执行 PRD 中的 SQL（第9.1节）
  - [ ] 创建 `game_saves` 表
  - [ ] 创建 `player_stats` 表
  - [ ] 配置 RLS 策略
- [ ] 创建 Supabase 客户端
  - [ ] 创建 `src/lib/supabase.ts`
  - [ ] 配置环境变量（`.env.local`）
- [ ] 创建类型定义
  - [ ] 从 PRD 复制 `src/lib/types.ts`
  - [ ] 包含 GameState, FarmPlot, Crop 等接口
- [ ] 实现登录界面
  - [ ] `src/components/auth/LoginForm.tsx`
  - [ ] 邮箱/密码表单
  - [ ] 错误处理
- [ ] 实现注册界面
  - [ ] `src/components/auth/RegisterForm.tsx`
  - [ ] 注册逻辑
- [ ] 实现路由
  - [ ] `/` → 首页
  - [ ] `/login` → 登录页
  - [ ] `/register` → 注册页
  - [ ] `/game` → 游戏页（需登录）
- [ ] 创建认证状态管理
  - [ ] `src/store/authStore.ts`
  - [ ] 登录/登出状态
  - [ ] 用户信息存储

**环境变量模板**：
```env
# .env.local
VITE_SUPABASE_URL=你的Supabase URL
VITE_SUPABASE_ANON_KEY=你的Supabase Anon Key
```

**产出**：
- ✅ 用户可以注册新账号
- ✅ 用户可以登录
- ✅ 登录后跳转到游戏页面
- ✅ 未登录自动跳转到登录页

**验证标准**：
1. 注册一个新账号
2. 登录成功
3. 看到 Supabase 数据库中有用户记录
4. 登录后能正常访问游戏页

**下一步**：阶段3 - 基础框架搭建

---

### 📅 阶段3：基础框架搭建（1-2天）

**目标**：搭建游戏基础架构

**任务清单**：
- [ ] 创建 Layout 组件
  - [ ] `src/components/common/Layout.tsx`
  - [ ] 顶部导航栏
  - [ ] 底部工具栏（预留）
- [ ] 创建 Phaser 容器
  - [ ] `src/components/game/PhaserGame.tsx`
  - [ ] Phaser 游戏配置
  - [ ] 嵌入到 React 组件
- [ ] 创建基础游戏场景
  - [ ] `src/game/scenes/MainScene.ts`
  - [ ] 空场景（只显示背景）
  - [ ] 测试 Phaser 是否正常工作
- [ ] 创建游戏状态管理
  - [ ] `src/store/gameStore.ts`
  - [ ] 玩家状态（金币、体力）
  - [ ] 农场状态（土地列表）
  - [ ] 世界状态（天数、季节）
- [ ] 创建游戏页面
  - [ ] `src/pages/Game.tsx`
  - [ ] Layout + PhaserGame
  - [ ] 响应式布局
- [ ] 实现响应式检测
  - [ ] `src/hooks/useResponsive.ts`
  - [ ] 检测桌面/移动端
  - [ ] 动态调整布局

**产出**：
- ✅ 用户登录后看到游戏页面
- ✅ Phaser 游戏画面正常显示
- ✅ 状态管理正常工作
- ✅ 响应式布局可用

**验证标准**：
1. 登录后自动跳转到 `/game`
2. 页面显示游戏画面
3. 检查浏览器控制台无错误
4. 调整浏览器窗口大小，布局自适应

**下一步**：阶段4 - 游戏基础功能

---

### 📅 阶段4：游戏基础功能（3-4天）

**目标**：实现角色移动和土地系统

**任务清单**：
- [ ] 准备游戏素材（临时）
  - [ ] 创建简单色块图片
  - [ ] 角色（32x32 色块）
  - [ ] 土地（64x64 色块）
  - [ ] 背景（单一颜色）
  - [ ] 放在 `src/assets/sprites/`
- [ ] 创建玩家实体
  - [ ] `src/game/entities/Player.ts`
  - [ ] 精灵加载
  - [ ] 物理系统配置
- [ ] 实现角色移动（键盘）
  - [ ] WASD / 方向键控制
  - [ ] 移动速度调整
  - [ ] 边界检测
- [ ] 实现角色移动（鼠标）
  - [ ] 点击地面移动
  - [ ] 路径计算（简单直线）
- [ ] 创建农场地图
  - [ ] 生成 6-16 块土地
  - [ ] 网格布局（3x3 或 4x4）
  - [ ] 间距设置
- [ ] 创建土地实体
  - [ ] `src/game/entities/FarmPlot.ts`
  - [ ] 土地状态（荒地/耕地/播种/浇水）
  - [ ] 颜色变化
  - [ ] 交互区域
- [ ] 实现工具切换系统
  - [ ] 工具列表（锄头、种子、水壶、镰刀）
  - [ ] 当前工具状态
  - [ ] UI 显示当前工具
  - [ ] 数字键 1-4 快速切换
- [ ] 实现基础交互
  - [ ] 点击土地
  - [ ] 根据工具执行不同操作
  - [ ] 播放音效（预留）
- [ ] 实现输入系统
  - [ ] `src/game/systems/InputSystem.ts`
  - [ ] 键盘事件
  - [ ] 鼠标事件
- [ ] 创建农场系统
  - [ ] `src/game/systems/FarmSystem.ts`
  - [ ] 管理所有土地
  - [ ] 土地状态更新

**游戏配置**：
```typescript
// src/game/config/gameConfig.ts
export const GAME_CONFIG = {
  // 角色配置
  player: {
    speed: 100,        // 移动速度
    size: 32,          // 角色大小
  },
  // 土地配置
  plot: {
    width: 64,
    height: 64,
    gap: 10,
    rows: 3,
    cols: 3,
  },
  // 游戏时间
  time: {
    dayDuration: 180,  // 3分钟 = 1天（秒）
  },
};
```

**产出**：
- ✅ 玩家可以控制角色移动（WASD + 鼠标）
- ✅ 可以看到农场土地
- ✅ 可以切换工具
- ✅ 点击土地有反应

**验证标准**：
1. 用 WASD 移动角色
2. 用鼠标点击地面移动
3. 按 1-4 切换工具
4. 点击土地，土地有反应

**下一步**：阶段5 - 耕种系统

---

### 📅 阶段5：耕种系统（4-5天）

**目标**：实现完整的种地流程

**任务清单**：
- [ ] 创建作物配置数据
  - [ ] `src/game/config/cropData.ts`
  - [ ] 从 PRD 复制数据（第9.2.2节）
  - [ ] 包含所有作物类型
- [ ] 创建作物实体
  - [ ] `src/game/entities/Crop.ts`
  - [ ] 作物精灵
  - [ ] 生长阶段（0-4）
  - [ ] 成熟判断
- [ ] 实现播种功能
  - [ ] 选择种子
  - [ ] 点击耕地播种
  - [ ] 更新土地状态
  - [ ] 扣除种子数量
- [ ] 实现浇水功能
  - [ ] 选择水壶
  - [ ] 点击已播种土地
  - [ ] 土地变湿润
  - [ ] 记录今日已浇水
- [ ] 实现作物生长逻辑
  - [ ] 生长阶段计算
  - [ ] 每天结算逻辑
  - [ ] 浇水加速效果
- [ ] 创建时间系统
  - [ ] `src/game/systems/TimeSystem.ts`
  - [ ] 游戏内时间流逝
  - [ ] 睡觉功能
  - [ ] 每天结算触发
- [ ] 实现每天结算
  - [ ] 遍历所有作物
  - [ ] 检查是否浇水
  - [ ] 减少剩余天数
  - [ ] 更新生长阶段
  - [ ] 判断成熟
- [ ] 实现收获功能
  - [ ] 选择镰刀
  - [ ] 点击成熟作物
  - [ ] 获得农产品
  - [ ] 土地重置为耕地
- [ ] 创建背包系统（简单版）
  - [ ] 物品列表
  - [ ] 添加物品
  - [ ] 扣除物品
  - [ ] 查询物品数量
- [ ] 实现存档系统（本地）
  - [ ] `src/hooks/useGameSave.ts`
  - [ ] 保存到 LocalStorage
  - [ ] 从 LocalStorage 加载
  - [ ] 自动保存触发
- [ ] 实现存档系统（云端）
  - [ ] 保存到 Supabase
  - [ ] 从 Supabase 加载
  - [ ] 登录自动加载
  - [ ] 睡觉自动保存
- [ ] 创建 HUD 组件
  - [ ] `src/components/game/HUD.tsx`
  - [ ] 金币显示
  - [ ] 体力显示
  - [ ] 时间/季节显示
  - [ ] 当前工具显示

**数据结构**：
```typescript
// 土地上的作物
interface Crop {
  type: string;              // 'carrot', 'potato' 等
  daysUntilMature: number;   // 剩余天数
  growthStage: number;       // 生长阶段 (0-4)
  isMature: boolean;         // 是否成熟
  isWateredToday: boolean;   // 今天是否浇水
  plantedDay: number;        // 种植日期
}
```

**产出**：
- ✅ 完整的种地流程（耕地→播种→浇水→等待→收获）
- ✅ 作物数据正确保存和加载
- ✅ 可以看到"还需X天"
- ✅ 云存档同步正常工作

**验证标准**：
1. 耕地 → 播种萝卜 → 浇水
2. 睡觉 → 作物生长
3. 重复浇水 → 3天后成熟
4. 收获 → 获得萝卜
5. 刷新页面 → 数据还在
6. 换设备登录 → 数据同步

**下一步**：阶段6 - UI 弹窗系统

---

### 📅 阶段6：UI 弹窗系统（2-3天）

**目标**：实现游戏UI弹窗

**任务清单**：
- [ ] 创建弹窗容器
  - [ ] `src/components/common/Modal.tsx`
  - [ ] 通用弹窗组件
  - [ ] 打开/关闭动画
- [ ] 创建商店界面
  - [ ] `src/components/game/StoreModal.tsx`
  - [ ] 种子列表
  - [ ] 价格显示
  - [ ] 购买按钮
  - [ ] 数量选择
  - [ ] 当前金币显示
- [ ] 创建背包界面
  - [ ] `src/components/game/InventoryModal.tsx`
  - [ ] 物品列表
  - [ ] 物品图标
  - [ ] 数量显示
  - [ ] 出售按钮
  - [ ] 分类标签（种子/作物/产品）
- [ ] 创建任务界面
  - [ ] `src/components/game/QuestModal.tsx`
  - [ ] 任务列表
  - [ ] 任务描述
  - [ ] 进度条
  - [ ] 奖励显示
  - [ ] 进行中/已完成标签
- [ ] 创建设置界面
  - [ ] `src/components/game/SettingsModal.tsx`
  - [ ] 音量控制（背景音乐/音效）
  - [ ] 游戏速度设置
  - [ ] 存档管理
  - [ ] 退出登录
- [ ] 创建 UI 状态管理
  - [ ] `src/store/uiStore.ts`
  - [ ] 弹窗开关状态
  - [ ] 当前打开的弹窗
- [ ] 添加快捷键
  - [ ] `E` 键打开背包
  - [ ] `Q` 键打开任务
  - [ ] `ESC` 键打开设置/关闭弹窗
- [ ] 弹窗动画
  - [ ] 淡入淡出
  - [ ] 缩放效果
  - [ ] 过渡流畅
- [ ] 响应式适配
  - [ ] 桌面端：弹窗居中
  - [ ] 移动端：弹窗全屏或底部
  - [ ] 触摸友好的按钮大小

**产出**：
- ✅ 商店弹窗可以打开/关闭
- ✅ 可以查看背包
- ✅ 可以查看任务
- ✅ 可以打开设置
- ✅ 弹窗动画流畅
- ✅ 移动端显示正常

**验证标准**：
1. 按 `E` 打开背包，能看到物品
2. 按 `Q` 打开任务，能看到任务列表
3. 按 `ESC` 打开设置
4. 点击遮罩层关闭弹窗
5. 在手机上测试，弹窗显示正常

**下一步**：阶段7 - 商店和交易

---

### 📅 阶段7：商店和交易（1-2天）

**目标**：实现经济系统

**任务清单**：
- [ ] 实现金币系统
  - [ ] 金币变量在 gameStore
  - [ ] 增加金币函数
  - [ ] 减少金币函数
  - [ ] UI 实时更新
- [ ] 实现购买种子
  - [ ] 点击购买按钮
  - [ ] 检查金币是否足够
  - [ ] 扣除金币
  - [ ] 添加到背包
  - [ ] UI 反馈（成功/失败）
- [ ] 实现出售作物
  - [ ] 在背包界面点击出售
  - [ ] 移除物品
  - [ ] 增加金币
  - [ ] UI 反馈
- [ ] 实现价格波动
  - [ ] 每天随机价格（±20%）
  - [ ] 存储当日价格
  - [ ] UI 显示当前价格
- [ ] 更新 HUD
  - [ ] 金币实时显示
  - [ ] 价格变化提示
- [ ] 添加音效（预留）
  - [ ] 购买音效
  - [ ] 出售音效
  - [ ] 金币不足音效

**价格计算**：
```typescript
// 每天更新价格
function updateDailyPrices() {
  CROP_DATA.forEach(crop => {
    const fluctuation = (Math.random() - 0.5) * 0.4; // ±20%
    crop.currentPrice = crop.basePrice * (1 + fluctuation);
  });
}
```

**产出**：
- ✅ 可以购买种子
- ✅ 可以出售作物
- ✅ 金币正确增减
- ✅ 价格每天变化
- ✅ UI 反馈清晰

**验证标准**：
1. 初始金币足够，购买10个萝卜种子
2. 种植并收获萝卜
3. 出售萝卜，获得金币
4. 睡觉后，价格发生变化
5. 金币不足时，无法购买

**下一步**：阶段8 - 任务和NPC

---

### 📅 阶段8：任务和NPC（2-3天）

**目标**：实现任务系统和NPC

**任务清单**：
- [ ] 创建任务配置数据
  - [ ] `src/game/config/questData.ts`
  - [ ] 新手任务（播种5个萝卜）
  - [ ] 第一次收获（收获10个作物）
  - [ ] 小有积蓄（赚500金币）
  - [ ] 任务奖励配置
- [ ] 创建 NPC 实体
  - [ ] `src/game/entities/NPC.ts`
  - [ ] 简单图片（用色块或表情符号）
  - [ ] 位置固定
  - [ ] 交互区域
- [ ] 实现对话系统
  - [ ] 简单对话框
  - [ ] NPC 欢迎语
  - [ ] 任务发布对话
  - [ ] 任务完成对话
- [ ] 实现任务系统
  - [ ] `src/game/systems/QuestSystem.ts`
  - [ ] 任务列表管理
  - [ ] 任务进度跟踪
  - [ ] 任务完成判断
- [ ] 实现任务发布
  - [ ] 与 NPC 对话接受任务
  - [ ] 添加到进行中列表
  - [ ] UI 提示新任务
- [ ] 实现任务进度更新
  - [ ] 播种时更新相关任务
  - [ ] 收获时更新相关任务
  - [ ] 赚金币时更新相关任务
- [ ] 实现任务完成
  - [ ] 达成条件自动完成
  - [ ] 与 NPC 对话领取奖励
  - [ ] 发放奖励（金币/物品/解锁）
  - [ ] 移动到已完成列表
- [ ] 更新任务UI
  - [ ] 显示进行中任务
  - [ ] 显示任务描述
  - [ ] 显示进度（如 3/5 个萝卜）
  - [ ] 显示奖励
- [ ] 添加任务提示
  - [ ] HUD 显示任务快捷入口
  - [ ] 任务完成时提示

**NPC 列表**（简化版）：
```
老农夫汤姆 - 发布新手任务
位置：农场入口
形象：戴草帽的老人图标

商人玛丽 - 商店老板
位置：商店
形象：金币图标
```

**产出**：
- ✅ 可以和 NPC 对话
- ✅ 可以接受任务
- ✅ 完成任务有进度更新
- ✅ 领取任务奖励
- ✅ 任务UI正常显示

**验证标准**：
1. 和老汤姆对话，接受新手任务
2. 种植5个萝卜
3. 任务显示"5/5"完成
4. 对话领取奖励，获得金币
5. 任务移到已完成列表

**下一步**：阶段9 - 动物养殖

---

### 📅 阶段9：动物养殖（2-3天）

**目标**：实现基础动物系统

**任务清单**：
- [ ] 创建动物配置数据
  - [ ] `src/game/config/animalData.ts`
  - [ ] 鸡的数据（价格、产品）
  - [ ] 牛的数据（价格、产品）
- [ ] 创建动物实体
  - [ ] `src/game/entities/Animal.ts`
  - [ ] 动物精灵（简单图片）
  - [ ] 动画（静止、移动）
  - [ ] 状态（饥饿、快乐、产品就绪）
- [ ] 实现购买动物
  - [ ] 在商店购买小鸡/小牛
  - [ ] 扣除金币
  - [ ] 放置到农场
  - [ ] 添加到动物列表
- [ ] 实现喂养系统
  - [ ] 每天检查是否喂养
  - [ ] 自动扣除饲料费
  - [ ] 更新快乐值
  - [ ] UI 显示喂养状态
- [ ] 实现产品系统
  - [ ] 每天刷新产品
  - [ ] 产品就绪提示
  - [ ] 点击动物收集产品
  - [ ] 添加到背包
- [ ] 实现动物状态管理
  - [ ] 年龄增长
  - [ ] 快乐值变化
  - [ ] 产品刷新时间
- [ ] 创建动物系统
  - [ ] `src/game/systems/AnimalSystem.ts`
  - [ ] 管理所有动物
  - [ ] 每天结算动物状态
- [ ] 更新UI
  - [ ] 商店显示动物可购买
  - [ ] 点击动物显示信息
  - [ ] 产品就绪动画/提示

**动物数据**：
```typescript
const ANIMAL_DATA = {
  chicken: {
    buyPrice: 100,
    product: 'egg',
    productPrice: 15,
    feedCost: 5,
    productInterval: 1, // 1天
  },
  cow: {
    buyPrice: 500,
    product: 'milk',
    productPrice: 50,
    feedCost: 20,
    productInterval: 1,
  },
};
```

**产出**：
- ✅ 可以购买鸡和牛
- ✅ 动物每天需要喂养
- ✅ 每天可以收集产品
- ✅ 产品可以出售
- ✅ 动物状态正常显示

**验证标准**：
1. 在商店买一只小鸡（花费100金币）
2. 小鸡出现在农场
3. 睡觉后，小鸡产出鸡蛋
4. 点击小鸡收集鸡蛋
5. 在商店出售鸡蛋（获得15金币）

**下一步**：阶段10 - 打磨和优化

---

### 📅 阶段10：打磨和优化（3-4天）

**目标**：提升游戏体验和性能

**任务清单**：
- [ ] 添加音效和背景音乐
  - [ ] 准备音频文件（或找免费素材）
  - [ ] 背景音乐（白天、夜晚、商店）
  - [ ] 音效（耕地、播种、浇水、收获）
  - [ ] 音量控制
  - [ ] 移动端自动降低音质
- [ ] 添加粒子效果
  - [ ] 浇水水花
  - [ ] 收获闪光
  - [ ] 任务完成庆祝
- [ ] UI 动画优化
  - [ ] 按钮悬停效果
  - [ ] 弹窗过渡动画
  - [ ] 数字变化动画
  - [ ] 进度条动画
- [ ] 加载动画
  - [ ] 资源预加载
  - [ ] 加载进度条
  - [ ] 加载失败提示
- [ ] 性能优化
  - [ ] 对象池（作物复用）
  - [ ] 精灵图（减少HTTP请求）
  - [ ] 渲染优化（只更新可视区域）
  - [ ] 防抖（存档保存）
- [ ] 移动端优化
  - [ ] 虚拟摇杆调整
  - [ ] 触摸区域优化
  - [ ] 布局适配
  - [ ] 横屏提示
- [ ] 错误处理
  - [ ] 网络错误提示
  - [ ] 存档失败处理
  - [ ] Supabase 连接失败提示
  - [ ] 优雅降级
- [ ] 代码优化
  - [ ] 添加注释
  - [ ] 重构重复代码
  - [ ] 类型检查完善
  - [ ] 删除无用代码
- [ ] 用户体验优化
  - [ ] 操作反馈（音效+动画）
  - [ ] 引导提示（新手教学）
  - [ ] 快捷键提示
  - [ ] 防误操作（确认对话框）

**性能指标**：
```
目标：
- 首次加载 < 5秒
- 游戏帧率 ≥ 30 FPS（移动端）
- 游戏帧率 ≥ 60 FPS（桌面端）
- 内存占用 < 200MB
```

**产出**：
- ✅ 游戏有音效和背景音乐
- ✅ 动画流畅，体验好
- ✅ 性能达到目标
- ✅ 移动端体验良好
- ✅ 错误处理完善

**验证标准**：
1. 打开游戏，听到背景音乐
2. 操作时有音效反馈
3. 长时间游戏不卡顿
4. 在手机上测试，流畅可用
5. 断网时游戏仍可运行（本地存档）

**下一步**：阶段11 - 部署和发布

---

### 📅 阶段11：部署和发布（1天）

**目标**：将游戏部署到线上

**任务清单**：
- [ ] 准备部署
  - [ ] 最终测试（所有功能）
  - [ ] 修复已知 Bug
  - [ ] 清理开发代码
  - [ ] 更新 README
- [ ] 部署前端到 Vercel
  - [ ] 连接 GitHub 仓库
  - [ ] 导入项目到 Vercel
  - [ ] 配置环境变量
  - [ ] 部署成功
- [ ] 配置 Supabase 生产环境
  - [ ] 确认数据库表结构正确
  - [ ] 检查 RLS 策略
  - [ ] 测试云端存档
  - [ ] 备份数据库
- [ ] 测试线上版本
  - [ ] 在不同浏览器测试
  - [ ] 在手机上测试
  - [ ] 测试注册/登录
  - [ ] 测试存档同步
- [ ] 准署发布
  - [ ] 准备游戏说明（简单）
  - [ ] 录制演示视频（可选）
  - [ ] 分享给朋友测试
- [ ] 监控和反馈
  - [ ] 查看访问统计
  - [ ] 收集 bug 反馈
  - [ ] 准备后续更新计划

**部署命令**：
```bash
# 提交代码
git add .
git commit -m "准备发布 v1.0"
git push

# Vercel 会自动部署
# 或手动触发
vercel --prod
```

**产出**：
- ✅ 游戏在线可玩
- ✅ 朋友可以访问
- ✅ 存档正常同步
- ✅ 准备好接收反馈

**验证标准**：
1. 分享链接给朋友
2. 朋友可以注册登录
3. 可以正常游戏
4. 数据正确保存

**🎉 恭喜！项目完成！**

---

## 时间安排

### 推荐节奏（每周）

```
═══════════════════════════════════════
第1周：项目初始化 + 基础框架
═══════════════════════════════════════
Day 1-2:  阶段1-2（项目搭建 + Supabase）
Day 3-4:  阶段3（基础框架）
Day 5-7:  阶段4（游戏基础功能）

里程碑：
✅ 可以登录游戏
✅ 看到角色和空农场

═══════════════════════════════════════
第2周：核心耕种系统
═══════════════════════════════════════
Day 8-12: 阶段5（耕种系统）
Day 13-14: 阶段6（UI弹窗）

里程碑：
✅ 可以种地、浇水、收获
✅ 数据自动保存

═══════════════════════════════════════
第3周：经济和任务系统
═══════════════════════════════════════
Day 15-16: 阶段7（商店和交易）
Day 17-19: 阶段8（任务和NPC）
Day 20-21: 阶段9（动物养殖）

里程碑：
✅ 可以买种子、卖作物
✅ 可以完成任务
✅ 可以养动物

═══════════════════════════════════════
第4周：打磨和部署
═══════════════════════════════════════
Day 22-25: 阶段10（打磨和优化）
Day 26-28: 阶段11（部署和发布）

里程碑：
✅ 游戏流畅
✅ 音效完整
✅ 线上可玩
```

### 每日建议工作时间

```
工作日（周一至周五）：
- 晚上: 2-3小时
- 每周: 10-15小时

周末：
- 每天: 4-6小时
- 每周: 8-12小时

总计：约20-25小时/周
```

### 加急方案（如果需要更快）

```
每天4-6小时开发
→ 3周完成核心功能
→ 1周打磨优化
→ 总计4周
```

---

## 里程碑检查点

### ✅ 第1周检查点

**检查项**：
- [ ] 项目可以本地运行
- [ ] 可以注册/登录
- [ ] 登录后看到游戏页面
- [ ] 看到角色和土地
- [ ] 可以移动角色
- [ ] 可以点击土地

**完成标准**：
- 6/6 项通过 → 进入第2周
- < 6 项 → 补齐再继续

---

### ✅ 第2周检查点

**检查项**：
- [ ] 可以耕地
- [ ] 可以播种（有种子）
- [ ] 可以浇水
- [ ] 作物会生长
- [ ] 可以收获
- [ ] 数据保存和加载正常
- [ ] 云端同步正常

**完成标准**：
- 7/7 项通过 → 进入第3周
- < 7 项 → 修复问题再继续

---

### ✅ 第3周检查点

**检查项**：
- [ ] 商店可以打开
- [ ] 可以购买种子
- [ ] 可以出售作物
- [ ] 金币正确增减
- [ ] 可以看到NPC
- [ ] 可以接受任务
- [ ] 可以完成任务
- [ ] 可以购买动物

**完成标准**：
- 8/8 项通过 → 进入第4周
- < 8 项 → 优先完成核心功能

---

### ✅ 第4周检查点

**检查项**：
- [ ] 游戏流畅无卡顿
- [ ] 音效正常
- [ ] 移动端可用
- [ ] 部署到线上
- [ ] 朋友可以访问
- [ ] 存档同步正常

**完成标准**：
- 6/6 项通过 → 项目完成 🎉
- < 6 项 → 继续优化

---

## 开发建议

### 每天开始前

**列出今日任务**：
```markdown
今天的任务（按优先级）：
1. [ ] 实现角色移动（必须）
2. [ ] 创建农场地图（必须）
3. [ ] 测试键盘控制（必须）
```

### 每个功能完成后

**立即测试**：
```
完成角色移动代码
↓
运行游戏，测试移动
↓
发现问题（移动太快）
↓
调整速度参数
↓
再测试，直到满意
↓
继续下一个功能
```

### 遇到问题时

**处理优先级**：
```
问题：角色移动不平滑

优先级1：先实现基本移动（能用）
→ 简单实现：W按下就移动

优先级2：优化移动手感（好用）
→ 添加加速度、摩擦力

优先级3：打磨细节（完美）
→ 添加移动动画、方向变化
```

### 定期备份

**每天结束前**：
```bash
# 提交代码
git add .
git commit -m "完成角色移动和农场地图"
git push

# 如果没有用Git
# 至少复制整个项目文件夹备份
```

### 避免常见陷阱

**❌ 不要这样做**：
- 一次性写太多代码，不测试
- 追求完美，迟迟不完成功能
- 留下太多"TODO"以后再做
- 不写注释，代码难以理解

**✅ 应该这样做**：
- 完成一个小功能，立即测试
- 先实现功能，再优化代码
- TODO立即记录，尽快完成
- 关键逻辑写注释

---

## 进度追踪

### 当前状态

```
当前阶段：准备开始
开始日期：____
预计完成：____

已完成任务：0/11 个阶段
总体进度：0%
```

### 每周进度

```
第1周：[ ] 阶段1-4
第2周：[ ] 阶段5-6
第3周：[ ] 阶段7-9
第4周：[ ] 阶段10-11
```

### 问题记录

```
遇到的问题：
-
-

解决方案：
-
-
```

---

## 快速参考

### 常用命令

```bash
# 开发
npm run dev

# 构建
npm run build

# 预览构建
npm run preview

# 代码检查
npm run lint

# 格式化
npm run format
```

### 重要文件位置

```
PRD文档:          ./PRD.md
开发流程:         ./DEVELOPMENT.md (本文件)
类型定义:         ./src/lib/types.ts
游戏配置:         ./src/game/config/
数据库Schema:     ./supabase/migrations/
```

### 环境变量

```env
VITE_SUPABASE_URL=
VITE_SUPABASE_ANON_KEY=
```

---

## 最后的话

**记住**：
- 🎯 这是一个学习项目，允许不完美
- 🚀 完成比完美更重要
- 💪 遇到问题不要慌，一步步解决
- 🎮 享受游戏开发的乐趣！

**遇到困难时**：
- 回到PRD查看需求
- 查阅技术文档
- 简化功能，先实现基础版
- 记录问题，以后优化

**祝你开发顺利！** 🌟

---

**文档版本**: v1.0
**创建日期**: 2026-01-01
**最后更新**: 2026-01-01
